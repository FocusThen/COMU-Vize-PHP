<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Isa Karaman | Kullanici ekle</title>

    <link rel="stylesheet" href="../css/main.css?v=<?php echo time(); ?>" />
  </head>
  <body>
    <main>
      <!-- Ana Sayfa Navigasyonu -->
      <nav>
        <ul class="nav_links">
          <li><a href="anaSayfa.html">Kullanici Listele</a></li>
          <!-- kullaniciEkle.html -->
          <li>
            <a class="current" href="./kullaniciEkle.html">Kullanici Ekle</a>
          </li>
          <!-- grup ile kullanilari ayni yerde gosterebilirim. -->
          <li><a href="./grupListele.html">Grup Listele</a></li>
          <!-- gurupEkle.html -->
          <li><a href="./grupEkle.html">Grup Ekle</a></li>
        </ul>
        <button class="btn-cikis">Cikis Yap</button>
      </nav>
      <!-- Navihation End-->
      <section class="form-section">
        <form class="ekle-form" action="../backend/kisiEkle.php" method="post">
          <!-- Template -->
          <label class="form-ekle" for="kisiAd">
            <span>
              Ad :
            </span>
            <input
              class="form-input"
              type="text"
              name="kisiAd"
              id="kisiAd"
              required
            />
          </label>

          <!-- Template end -->

          <label class="form-ekle" for="kisiSoyad">
            <span>
              Soyad :
            </span>
            <input
              class="form-input"
              type="text"
              name="kisiSoyad"
              id="kisiSoyad"
              required
            />
          </label>

          <label class="form-ekle" for="email">
            <span>
              Email :
            </span>
            <input
              class="form-input"
              type="email"
              name="email"
              id="email"
              required
            />
          </label>

          <label class="form-ekle" for="telno">
            <span>
              Tel No :
            </span>
            <input
              class="form-input"
              type="number"
              name="telNo"
              id="telno"
              required
            />
          </label>

          <label class="form-ekle" for="cepno">
            <span>
              Cep No :
            </span>
            <input
              class="form-input"
              type="number"
              name="cepNo"
              id="cepno"
              required
            />
          </label>

          <label class="form-ekle" for="kisiunvan">
            <span>
              Unvan :
            </span>
            <input
              class="form-input"
              type="text"
              name="kisiUnvan"
              id="kisiunvan"
              required
            />
          </label>

          <label class="form-ekle" for="groupad">
            <span>
              Grub AdÄ± :
            </span>
            <select class="form-selection" name="groupAd" id="groupad">
            </select>
          </label>

          <button class="btn-ekle">Ekle</button>
        </form>
      </section>
    </main>

    <script>
      async function getData() {
        const select = document.getElementById("groupad");

        const req = await fetch("../backend/grupGet.php");
        const res = await req.text();
        const data = JSON.parse(res);
        const gruplar = data.gruplar;

        gruplar.forEach((grup) => {
          const options = document.createElement("option");
          options.value = grup.id;
          options.textContent = grup.grupAd;
          select.appendChild(options);
        });
      }
      getData();
    </script>
  </body>
</html>
